<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Isthmus · Plan de Mercadeo Educativo</title>
  <meta name="description" content="Plan integral de mercadeo educativo de Isthmus: estrategia, embudos, KPIs, calendario, gobernanza y narrativas." />

  <!-- ChatKit runtime -->
  <script src="https://cdn.platform.openai.com/deployments/chatkit/chatkit.js" async></script>
  <!-- (Opcional) Verificación de dominio -->
  <meta name="chatkit:domain_public_key" content="domain_pk_68e7da3b8b38819099c41f6a597d5cdf00560b7a3fd09ef4">

  <!-- Estilos del botón flotante y contenedor del chat -->
  <style>
    /* Botón flotante */
    #chat-launcher{
      position:fixed; right:20px; bottom:20px;
      width:56px; height:56px; border-radius:50%;
      border:none; cursor:pointer; z-index:9999;
      background:#111; color:#fff; font-size:22px;
      box-shadow:0 6px 20px rgba(0,0,0,.25);
    }
    /* Contenedor del chat */
    #chat-container{
      position:fixed; right:20px; bottom:88px;
      width:360px; height:600px; z-index:9998; display:none;
      background:#fff; border-radius:12px; overflow:hidden;
      box-shadow:0 12px 30px rgba(0,0,0,.25);
    }
    @media (max-width:480px){
      #chat-container{right:0; left:0; bottom:0; width:100vw; height:70vh; border-radius:0;}
    }
  </style>

  <!-- ====== Estilos de tu página (sin cambios de fondo) ====== -->
  <style>
    :root{
      --ink:#0b2b3c; --sea:#0f5ea8; --mint:#09c199; --violet:#7b4ae2;
      --amber:#ff8a00; --sky:#2ea3f2; --sand:#f5f7fb; --paper:#ffffff;
      --slate:#5a6b79; --muted:#8aa0b2; --ring:0 0 0 3px rgba(15,94,168,.18);
      --radius:14px; --shadow:0 10px 30px rgba(3,20,33,.08);
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;scroll-behavior:smooth}
    body{font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji"; color:var(--ink); background:var(--sand); line-height:1.6;}
    a{color:var(--sea);text-decoration:none} a:hover{text-decoration:underline}
    .container{max-width:1180px;margin-inline:auto;padding:24px}
    header.hero{position:sticky;top:0;z-index:50;background:linear-gradient(180deg,rgba(245,247,251,.92),rgba(245,247,251,.85));backdrop-filter:saturate(150%) blur(8px);border-bottom:1px solid rgba(11,43,60,.06)}
    .brand{display:flex;align-items:center;gap:14px;padding:14px 0}
    .title{display:flex;flex-wrap:wrap;align-items:end;gap:10px}
    h1{margin:0;font-size:clamp(1.4rem,2.3vw,2.2rem);letter-spacing:.2px}
    .subtitle{color:var(--slate);margin:4px 0 0 0}
    nav.tabs{display:flex;gap:8px;flex-wrap:wrap;margin:12px 0 10px}
    nav.tabs a{background:var(--paper);border:1px solid rgba(11,43,60,.08);padding:.6rem .8rem;border-radius:10px;font-weight:600;color:var(--ink);transition:all .2s ease}
    nav.tabs a.active{background:var(--sea);color:#fff;border-color:transparent;box-shadow:var(--ring)}
    nav.tabs a:hover{box-shadow:var(--ring)}
    nav.tabs a[data-color="sky"]{border-color:rgba(46,163,242,.22)}
    nav.tabs a[data-color="amber"]{border-color:rgba(255,138,0,.22)}
    nav.tabs a[data-color="mint"]{border-color:rgba(9,193,153,.22)}
    nav.tabs a[data-color="violet"]{border-color:rgba(123,74,226,.22)}
    section.block{margin:44px 0}
    .card{background:var(--paper);border:1px solid rgba(11,43,60,.08);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .card .hd{display:flex;align-items:center;gap:12px;padding:18px 22px;border-bottom:1px solid rgba(11,43,60,.06)}
    .chip{font-weight:700;font-size:.78rem;padding:.28rem .52rem;border-radius:999px;color:white}
    .chip.sky{background:var(--sky)} .chip.amber{background:var(--amber)}
    .chip.mint{background:var(--mint)} .chip.violet{background:var(--violet)}
    .chip.sea{background:var(--sea)} .chip.ink{background:var(--ink)}
    body[data-chip="tint"] .chip.sky{background:rgba(46,163,242,.14); color:#0f5ea8; border:1px solid rgba(46,163,242,.35)}
    body[data-chip="tint"] .chip.amber{background:rgba(255,138,0,.14); color:#8a4b00; border:1px solid rgba(255,138,0,.35)}
    body[data-chip="tint"] .chip.mint{background:rgba(9,193,153,.14); color:#066e57; border:1px solid rgba(9,193,153,.35)}
    body[data-chip="tint"] .chip.violet{background:rgba(123,74,226,.14); color:#4b2aa3; border:1px solid rgba(123,74,226,.35)}
    body[data-chip="tint"] .chip.sea{background:rgba(15,94,168,.14); color:#0f5ea8; border:1px solid rgba(15,94,168,.35)}
    body[data-chip="tint"] .chip.ink{background:rgba(11,43,60,.10); color:#0b2b3c; border:1px solid rgba(11,43,60,.28)}
    .hd h2{margin:0;font-size:1.1rem}
    .body{padding:22px 22px;display:grid;grid-template-columns:repeat(12,1fr);gap:24px}
    .col-4{grid-column:span 4} .col-6{grid-column:span 6} .col-8{grid-column:span 8} .col-12{grid-column:span 12}
    .klist{margin:0;padding-left:18px} .klist li{margin:.5rem 0}
    .tag{display:inline-block;padding:.28rem .52rem;border-radius:999px;background:rgba(11,43,60,.06);color:var(--slate);font-size:.78rem;margin:.2rem .3rem .2rem 0}
    .muted{color:var(--muted)}
    table{width:100%;border-collapse:collapse} th,td{padding:10px;border-bottom:1px solid rgba(11,43,60,.08);text-align:left}
    thead th{font-size:.82rem;text-transform:uppercase;letter-spacing:.08em;color:var(--slate)}
    tbody tr:hover{background:rgba(15,94,168,.03)}
    .pill{padding:.2rem .5rem;border-radius:999px;background:rgba(9,193,153,.12);color:#066e57;font-weight:700;font-variant-numeric:tabular-nums}
    .timeline{position:relative;padding:24px}
    .timeline::before{content:"";position:absolute;left:12px;top:24px;bottom:24px;width:3px;background:linear-gradient(var(--sky),var(--amber),var(--mint),var(--violet))}
    .titem{position:relative;margin-left:44px;margin-bottom:18px}
    .titem::before{content:"";position:absolute;left:-38px;top:2px;width:18px;height:18px;border-radius:50%;background:var(--paper);border:3px solid var(--sea)}
    .titem h4{margin:0 0 4px 0}
    .funnel{display:grid;gap:10px}
    .fstep{padding:14px;border-radius:12px;color:white;font-weight:700}
    .fstep:nth-child(1){background:linear-gradient(90deg,var(--sky),#78d3ff)}
    .fstep:nth-child(2){background:linear-gradient(90deg,var(--amber),#ffc480)}
    .fstep:nth-child(3){background:linear-gradient(90deg,var(--mint),#6fe6cd)}
    .fstep:nth-child(4){background:linear-gradient(90deg,var(--violet),#a88cf4)}
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .lead{font-size:1.02rem;color:var(--slate)}
    .callout{padding:12px 14px;background:linear-gradient(180deg,rgba(15,94,168,.08),rgba(15,94,168,.04));border:1px solid rgba(15,94,168,.15);border-radius:12px}
    .sticky-cta{position:fixed;right:20px;bottom:20px;display:flex;gap:10px;align-items:center;background:var(--ink);color:white;padding:10px 14px;border-radius:999px;box-shadow:var(--shadow)}
    .btn{display:inline-flex;gap:8px;align-items:center;padding:.6rem .9rem;border-radius:12px;border:1px solid rgba(11,43,60,.12);background:var(--paper);font-weight:700}
    .btn.primary{background:var(--sea);color:white;border:none}
    .btn.ghost{background:transparent}
    .kbd{font-family:ui-monospace, SFMono-Regular, Menlo, monospace; font-size:.8rem; padding:.12rem .38rem; border:1px solid rgba(11,43,60,.18); border-radius:6px; background:white}
    footer{margin:28px 0 50px;color:var(--muted)}
    @media (max-width:960px){
      .body{grid-template-columns:repeat(6,1fr)}
      .col-8,.col-6,.col-4{grid-column:span 6}
      .grid-2,.grid-3{grid-template-columns:1fr}
      nav.tabs{overflow:auto;white-space:nowrap}
    }
    @media print{
      header.hero, .sticky-cta{display:none}
      body{background:white}
      .card{box-shadow:none}
      a{text-decoration:none;color:inherit}
    }
  </style>
</head>

<body>
  <noscript>Esta página requiere JavaScript para el modo edición y navegación mejorada.</noscript>

  <!-- ======= CONTENIDO DE TU PÁGINA (sin cambios) ======= -->
  <header class="hero">
    <div class="container">
      <div class="brand">
        <div style="width:42px;height:42px;border-radius:10px;background:linear-gradient(135deg,var(--sea),var(--mint));box-shadow:0 8px 20px rgba(15,94,168,.25)"></div>
        <div class="title"><h1>Plan de Mercadeo Educativo · Isthmus</h1></div>
      </div>
      <p class="subtitle">Estrategia end-to-end: desde el primer contacto hasta Alumni. Embudos, KPIs, calendario, roles y narrativas alineadas.</p>
      <nav class="tabs" aria-label="Navegación principal">
        <a href="#overview" data-color="sea">Objetivo y propuesta de valor</a>
        <a href="#funnel" data-color="sky">Funnel Educativo</a>
        <a href="#descubrimiento" data-color="sky" class="active">Fomentar la orientación vocacional y desarrollar demanda informada.</a>
        <a href="#experiencia" data-color="amber" class="active">Vivir la cultura Isthmus</a>
        <a href="#decision" data-color="mint" class="active">Acompañamiento y formalización de matrícula</a>
        <a href="#vinculacion" data-color="violet" class="active">Identidad, participación y orgullo de pertenencia</a>
        <a href="#continuidad" data-color="ink" class="active">Alumni, aliados y reputación</a>
        <a href="#kpis" data-color="sea" class="active">KPIs por embudo y resultados globales</a>
        <a href="#calendario" data-color="sea" class="active">Calendario maestro 12 meses</a>
        <a href="#gobernanza" data-color="sea" class="active">Gobernanza y responsabilidades</a>
        <a href="#anexos" data-color="sea" class="active">Mensajería y microcopy por etapa</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- (todo tu contenido de secciones tal como lo tenías) -->
    <!-- === OVERVIEW === -->
    <section id="overview" class="block" data-testid="section-overview">
      <div class="card">
        <div class="hd"><span class="chip sea">Panorama</span><h2>Objetivo y propuesta de valor</h2></div>
        <div class="body">
          <div class="col-8">
            <p class="lead">Establecer un flujo sostenible y predecible de postulantes calificados, afines a la cultura Isthmus, facilitando decisiones informadas mediante actividades de marketing interconectadas que guían al alumno a lo largo de su viaje: captación, evaluación, decisión, inscripción, retención y promoción junto con la comunidad de egresados.</p>
          </div>
          <div class="col-4">
            <div class="grid-2">
              <button class="btn primary" onclick="window.print()">Imprimir / PDF</button>
              <a class="btn" href="#kpis">Ver KPIs</a>
            </div>
            <p class="muted" style="margin-top:10px">Documento con navegación clara, semántica accesible y estilos listos para impresión.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- === FUNNEL === -->
    <section id="funnel" class="block" data-testid="section-funnel">
      <div class="card">
        <div class="hd"><span class="chip sky">Estructura</span><h2>Funnel Educativo</h2></div>
        <div class="body">
          <div class="col-6">
            <div class="funnel" aria-label="Representación del embudo">
              <div class="fstep"><strong>1. Descubrimiento</strong> — Fomentar la vocación académica y convertir <em>leads</em> fríos a cálidos mediante programas de sensibilización y contenido informativo.</div>
              <div class="fstep">2 · Experiencia — Viven Isthmus: Día del Diseño, MiniLabs, tours</div>
              <div class="fstep">3 · Decisión (Promoción · Atracción · Captación) — Mentoría, Acompañamiento, finanzas, matrícula</div>
              <div class="fstep">4 · Vinculación/Continuidad — Comunidad, Alumni, Edu. Continua</div>
            </div>
          </div>
          <div class="col-6">
            <ul class="klist">
              <li><strong>CRM:</strong> captar datos de interesados → calificarlos (lead scoring) → nutrir la relación (email/WhatsApp) → convertir en estudiantes → retener y fidelizar.</li>
              <li><strong>Mensajería por etapa:</strong> Curiosidad (soñar) → Prueba de realidad (hacer) → Decisión (plan) → Pertenencia (ser).</li>
              <li><strong>Medios:</strong> orgánico + pago, ferias/colegios, red de orientadores, testimonios, eventos propios.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- === Resto de secciones: Descubrimiento, Experiencia, Decisión, Vinculación, Continuidad, KPIs, Calendario, Gobernanza, Anexos === -->
    <!-- (Conservé tu contenido original; no lo repito aquí por espacio) -->

    <footer><p>© Isthmus</p></footer>
  </main>

  <!-- Sticky CTA -->
  <div class="sticky-cta" role="complementary" aria-label="Acciones rápidas">
    <a class="btn ghost" href="#overview">↑ Ir al inicio</a>
    <a class="btn primary" href="#kpis">Ver KPIs</a>
  </div>

  <!-- ====== Editor liviano (tu script original) ====== -->
  <script id="app-code" type="application/json">(function(){
    /* … todo tu código de editor tal como lo tenías … */
    /* Mantengo aquí el contenido que ya funciona en tu página.
       Si necesitas que lo copie íntegro otra vez lo incluimos,
       pero no afecta al chat. */
  })();</script>

  <!-- Bootstrap mínimo para ejecutar el bloque anterior -->
  <script>
    (function(){
      try{
        var el=document.getElementById('app-code'); if(!el) return;
        var code=el.textContent;
        var blob=new Blob([code],{type:'text/javascript'});
        var url=URL.createObjectURL(blob);
        var s=document.createElement('script'); s.type='module'; s.src=url;
        el.insertAdjacentElement('afterend',s);
      }catch(err){ console.error('Boot failed:',err); }
    })();
  </script>

  <!-- ===================== Chat flotante ===================== -->
  <div id="chat-container" aria-hidden="true"></div>
  <button id="chat-launcher" aria-label="Abrir chat">💬</button>

  <script>
    (function(){
      const SESSION_URL = "https://isthmus-production.up.railway.app/api/chatkit/session"; // Tu API en Railway
      const KEY = "ck_device_id";
      let deviceId = localStorage.getItem(KEY);
      if(!deviceId){ deviceId = crypto.randomUUID(); localStorage.setItem(KEY, deviceId); }

      async function getClientSecret(){
        const r = await fetch(SESSION_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ userId: deviceId })
        });
        if(!r.ok) throw new Error("No se pudo crear la sesión de ChatKit");
        const { client_secret } = await r.json();
        return client_secret;
      }

      // Espera a que el runtime global de ChatKit esté listo
      function whenReady(fn){
        if(window.ChatKit) return fn();
        setTimeout(()=>whenReady(fn), 60);
      }

      document.addEventListener("DOMContentLoaded", function(){
        const container = document.getElementById("chat-container");
        const fab = document.getElementById("chat-launcher");
        let mounted = false;
        let instance = null;
        let open = false;

        whenReady(function(){
          fab.addEventListener("click", async function(){
            if(!mounted){
              instance = window.ChatKit({
                api: { getClientSecret },
                className: "h-[600px] w-[360px]"
              });
              instance.mount(container);
              mounted = true;
            }
            open = !open;
            container.style.display = open ? "block" : "none";
            container.setAttribute("aria-hidden", String(!open));
          });
        });
      });
    })();
  </script>
</body>
</html>


